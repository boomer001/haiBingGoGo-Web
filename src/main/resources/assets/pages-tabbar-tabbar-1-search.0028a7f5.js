import{i as e,o as t,c as s,w as i,a,n,b as o,t as r,r as h,d,e as c,I as l,f as g,g as p,h as u,v as m,j as y,k as w,l as v,m as f,p as C,s as A,q as k,u as b,x as S}from"./index-32adae3f.js";const T={data:()=>({}),created(){this.popup=this.getParent()},methods:{getParent(e="uniPopup"){let t=this.$parent,s=t.$options.name;for(;s!==e;){if(t=t.$parent,!t)return!1;s=t.$options.name}return t}}},M={en:{"uni-popup.cancel":"cancel","uni-popup.ok":"ok","uni-popup.placeholder":"pleace enter","uni-popup.title":"Hint","uni-popup.shareTitle":"Share to"},"zh-Hans":{"uni-popup.cancel":"取消","uni-popup.ok":"确定","uni-popup.placeholder":"请输入","uni-popup.title":"提示","uni-popup.shareTitle":"分享到"},"zh-Hant":{"uni-popup.cancel":"取消","uni-popup.ok":"確定","uni-popup.placeholder":"請輸入","uni-popup.title":"提示","uni-popup.shareTitle":"分享到"}},D=(e,t)=>{const s=e.__vccOpts||e;for(const[i,a]of t)s[i]=a;return s},{t:B}=e(M);const I=D({name:"uniPopupDialog",mixins:[T],emits:["confirm","close"],props:{inputType:{type:String,default:"text"},value:{type:[String,Number],default:""},placeholder:{type:[String,Number],default:""},type:{type:String,default:"error"},mode:{type:String,default:"base"},title:{type:String,default:""},content:{type:String,default:""},beforeClose:{type:Boolean,default:!1},cancelText:{type:String,default:""},confirmText:{type:String,default:""}},data:()=>({dialogType:"error",focus:!1,val:""}),computed:{okText(){return this.confirmText||B("uni-popup.ok")},closeText(){return this.cancelText||B("uni-popup.cancel")},placeholderText(){return this.placeholder||B("uni-popup.placeholder")},titleText(){return this.title||B("uni-popup.title")}},watch:{type(e){this.dialogType=e},mode(e){"input"===e&&(this.dialogType="info")},value(e){this.val=e}},created(){this.popup.disableMask(),"input"===this.mode?(this.dialogType="info",this.val=this.value):this.dialogType=this.type},mounted(){this.focus=!0},methods:{onOk(){"input"===this.mode?this.$emit("confirm",this.val):this.$emit("confirm"),this.beforeClose||this.popup.close()},closeDialog(){this.$emit("close"),this.beforeClose||this.popup.close()},close(){this.popup.close()}}},[["render",function(e,g,p,u,m,y){const w=d,v=c,f=l;return t(),s(v,{class:"uni-popup-dialog"},{default:i((()=>[a(v,{class:"uni-dialog-title"},{default:i((()=>[a(w,{class:n(["uni-dialog-title-text",["uni-popup__"+m.dialogType]])},{default:i((()=>[o(r(y.titleText),1)])),_:1},8,["class"])])),_:1}),"base"===p.mode?(t(),s(v,{key:0,class:"uni-dialog-content"},{default:i((()=>[h(e.$slots,"default",{},(()=>[a(w,{class:"uni-dialog-content-text"},{default:i((()=>[o(r(p.content),1)])),_:1})]),!0)])),_:3})):(t(),s(v,{key:1,class:"uni-dialog-content"},{default:i((()=>[h(e.$slots,"default",{},(()=>[a(f,{class:"uni-dialog-input",modelValue:m.val,"onUpdate:modelValue":g[0]||(g[0]=e=>m.val=e),type:p.inputType,placeholder:y.placeholderText,focus:m.focus},null,8,["modelValue","type","placeholder","focus"])]),!0)])),_:3})),a(v,{class:"uni-dialog-button-group"},{default:i((()=>[a(v,{class:"uni-dialog-button",onClick:y.closeDialog},{default:i((()=>[a(w,{class:"uni-dialog-button-text"},{default:i((()=>[o(r(y.closeText),1)])),_:1})])),_:1},8,["onClick"]),a(v,{class:"uni-dialog-button uni-border-left",onClick:y.onOk},{default:i((()=>[a(w,{class:"uni-dialog-button-text uni-button-color"},{default:i((()=>[o(r(y.okText),1)])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:3})}],["__scopeId","data-v-b888b3dc"]]);function x(e,t){return g(e)?t:e}class R{constructor(e,t){this.options=e,this.animation=p({...e}),this.currentStepAnimates={},this.next=0,this.$=t}_nvuePushAnimates(e,t){let s=this.currentStepAnimates[this.next],i={};if(i=s||{styles:{},config:{}},E.includes(e)){i.styles.transform||(i.styles.transform="");let s="";"rotate"===e&&(s="deg"),i.styles.transform+=`${e}(${t+s}) `}else i.styles[e]=`${t}`;this.currentStepAnimates[this.next]=i}_animateRun(e={},t={}){let s=this.$.$refs.ani.ref;if(s)return new Promise(((i,a)=>{nvueAnimation.transition(s,{styles:e,...t},(e=>{i()}))}))}_nvueNextAnimate(e,t=0,s){let i=e[t];if(i){let{styles:a,config:n}=i;this._animateRun(a,n).then((()=>{t+=1,this._nvueNextAnimate(e,t,s)}))}else this.currentStepAnimates={},"function"==typeof s&&s(),this.isEnd=!0}step(e={}){return this.animation.step(e),this}run(e){this.$.animationData=this.animation.export(),this.$.timer=setTimeout((()=>{"function"==typeof e&&e()}),this.$.durationTime)}}const E=["matrix","matrix3d","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","translate","translate3d","translateX","translateY","translateZ"];function L(e,t){if(t)return clearTimeout(t.timer),new R(e,t)}E.concat(["opacity","backgroundColor"],["width","height","left","right","top","bottom"]).forEach((e=>{R.prototype[e]=function(...t){return this.animation[e](...t),this}}));const P=D({name:"uniTransition",emits:["click","change"],props:{show:{type:Boolean,default:!1},modeClass:{type:[Array,String],default:()=>"fade"},duration:{type:Number,default:300},styles:{type:Object,default:()=>({})},customClass:{type:String,default:""},onceRender:{type:Boolean,default:!1}},data:()=>({isShow:!1,transform:"",opacity:1,animationData:{},durationTime:300,config:{}}),watch:{show:{handler(e){e?this.open():this.isShow&&this.close()},immediate:!0}},computed:{stylesObject(){let e={...this.styles,"transition-duration":this.duration/1e3+"s"},t="";for(let s in e){t+=this.toLine(s)+":"+e[s]+";"}return t},transformStyles(){return"transform:"+this.transform+";opacity:"+this.opacity+";"+this.stylesObject}},created(){this.config={duration:this.duration,timingFunction:"ease",transformOrigin:"50% 50%",delay:0},this.durationTime=this.duration},methods:{init(e={}){e.duration&&(this.durationTime=e.duration),this.animation=L(Object.assign(this.config,e),this)},onClick(){this.$emit("click",{detail:this.isShow})},step(e,t={}){if(this.animation){for(let t in e)try{"object"==typeof e[t]?this.animation[t](...e[t]):this.animation[t](e[t])}catch(s){console.error(`方法 ${t} 不存在`)}return this.animation.step(t),this}},run(e){this.animation&&this.animation.run(e)},open(){clearTimeout(this.timer),this.transform="",this.isShow=!0;let{opacity:e,transform:t}=this.styleInit(!1);void 0!==e&&(this.opacity=e),this.transform=t,this.$nextTick((()=>{this.timer=setTimeout((()=>{this.animation=L(this.config,this),this.tranfromInit(!1).step(),this.animation.run(),this.$emit("change",{detail:this.isShow})}),20)}))},close(e){this.animation&&this.tranfromInit(!0).step().run((()=>{this.isShow=!1,this.animationData=null,this.animation=null;let{opacity:e,transform:t}=this.styleInit(!1);this.opacity=e||1,this.transform=t,this.$emit("change",{detail:this.isShow})}))},styleInit(e){let t={transform:""},s=(e,s)=>{"fade"===s?t.opacity=this.animationType(e)[s]:t.transform+=this.animationType(e)[s]+" "};return"string"==typeof this.modeClass?s(e,this.modeClass):this.modeClass.forEach((t=>{s(e,t)})),t},tranfromInit(e){let t=(e,t)=>{let s=null;"fade"===t?s=e?0:1:(s=e?"-100%":"0","zoom-in"===t&&(s=e?.8:1),"zoom-out"===t&&(s=e?1.2:1),"slide-right"===t&&(s=e?"100%":"0"),"slide-bottom"===t&&(s=e?"100%":"0")),this.animation[this.animationMode()[t]](s)};return"string"==typeof this.modeClass?t(e,this.modeClass):this.modeClass.forEach((s=>{t(e,s)})),this.animation},animationType:e=>({fade:e?1:0,"slide-top":`translateY(${e?"0":"-100%"})`,"slide-right":`translateX(${e?"0":"100%"})`,"slide-bottom":`translateY(${e?"0":"100%"})`,"slide-left":`translateX(${e?"0":"-100%"})`,"zoom-in":`scaleX(${e?1:.8}) scaleY(${e?1:.8})`,"zoom-out":`scaleX(${e?1:1.2}) scaleY(${e?1:1.2})`}),animationMode:()=>({fade:"opacity","slide-top":"translateY","slide-right":"translateX","slide-bottom":"translateY","slide-left":"translateX","zoom-in":"scale","zoom-out":"scale"}),toLine:e=>e.replace(/([A-Z])/g,"-$1").toLowerCase()}},[["render",function(e,a,o,r,d,l){const g=c;return u((t(),s(g,{ref:"ani",animation:d.animationData,class:n(o.customClass),style:y(l.transformStyles),onClick:l.onClick},{default:i((()=>[h(e.$slots,"default")])),_:3},8,["animation","class","style","onClick"])),[[m,d.isShow]])}]]);const _=D({name:"uniPopup",components:{keypress:{name:"Keypress",props:{disable:{type:Boolean,default:!1}},mounted(){const e={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]};document.addEventListener("keyup",(t=>{if(this.disable)return;const s=Object.keys(e).find((s=>{const i=t.key,a=e[s];return a===i||Array.isArray(a)&&a.includes(i)}));s&&setTimeout((()=>{this.$emit(s,{})}),0)}))},render:()=>{}}},emits:["change","maskClick"],props:{animation:{type:Boolean,default:!0},type:{type:String,default:"center"},isMaskClick:{type:Boolean,default:null},maskClick:{type:Boolean,default:null},backgroundColor:{type:String,default:"none"},safeArea:{type:Boolean,default:!0},maskBackgroundColor:{type:String,default:"rgba(0, 0, 0, 0.4)"}},watch:{type:{handler:function(e){this.config[e]&&this[this.config[e]](!0)},immediate:!0},isDesktop:{handler:function(e){this.config[e]&&this[this.config[this.type]](!0)},immediate:!0},maskClick:{handler:function(e){this.mkclick=e},immediate:!0},isMaskClick:{handler:function(e){this.mkclick=e},immediate:!0},showPopup(e){document.getElementsByTagName("body")[0].style.overflow=e?"hidden":"visible"}},data(){return{duration:300,ani:[],showPopup:!1,showTrans:!1,popupWidth:0,popupHeight:0,config:{top:"top",bottom:"bottom",center:"center",left:"left",right:"right",message:"top",dialog:"center",share:"bottom"},maskClass:{position:"fixed",bottom:0,top:0,left:0,right:0,backgroundColor:"rgba(0, 0, 0, 0.4)"},transClass:{position:"fixed",left:0,right:0},maskShow:!0,mkclick:!0,popupstyle:this.isDesktop?"fixforpc-top":"top"}},computed:{isDesktop(){return this.popupWidth>=500&&this.popupHeight>=500},bg(){return""===this.backgroundColor||"none"===this.backgroundColor?"transparent":this.backgroundColor}},mounted(){(()=>{const{windowWidth:e,windowHeight:t,windowTop:s,safeArea:i,screenHeight:a,safeAreaInsets:n}=C();this.popupWidth=e,this.popupHeight=t+(s||0),i&&this.safeArea?this.safeAreaInsets=n.bottom:this.safeAreaInsets=0})()},unmounted(){this.setH5Visible()},created(){null===this.isMaskClick&&null===this.maskClick?this.mkclick=!0:this.mkclick=null!==this.isMaskClick?this.isMaskClick:this.maskClick,this.animation?this.duration=300:this.duration=0,this.messageChild=null,this.clearPropagation=!1,this.maskClass.backgroundColor=this.maskBackgroundColor},methods:{setH5Visible(){document.getElementsByTagName("body")[0].style.overflow="visible"},closeMask(){this.maskShow=!1},disableMask(){this.mkclick=!1},clear(e){e.stopPropagation(),this.clearPropagation=!0},open(e){if(this.showPopup)return;e&&-1!==["top","center","bottom","left","right","message","dialog","share"].indexOf(e)||(e=this.type),this.config[e]?(this[this.config[e]](),this.$emit("change",{show:!0,type:e})):console.error("缺少类型：",e)},close(e){this.showTrans=!1,this.$emit("change",{show:!1,type:this.type}),clearTimeout(this.timer),this.timer=setTimeout((()=>{this.showPopup=!1}),300)},touchstart(){this.clearPropagation=!1},onTap(){this.clearPropagation?this.clearPropagation=!1:(this.$emit("maskClick"),this.mkclick&&this.close())},top(e){this.popupstyle=this.isDesktop?"fixforpc-top":"top",this.ani=["slide-top"],this.transClass={position:"fixed",left:0,right:0,backgroundColor:this.bg},e||(this.showPopup=!0,this.showTrans=!0,this.$nextTick((()=>{this.messageChild&&"message"===this.type&&this.messageChild.timerClose()})))},bottom(e){this.popupstyle="bottom",this.ani=["slide-bottom"],this.transClass={position:"fixed",left:0,right:0,bottom:0,paddingBottom:this.safeAreaInsets+"px",backgroundColor:this.bg},e||(this.showPopup=!0,this.showTrans=!0)},center(e){this.popupstyle="center",this.ani=["zoom-out","fade"],this.transClass={position:"fixed",display:"flex",flexDirection:"column",bottom:0,left:0,right:0,top:0,justifyContent:"center",alignItems:"center"},e||(this.showPopup=!0,this.showTrans=!0)},left(e){this.popupstyle="left",this.ani=["slide-left"],this.transClass={position:"fixed",left:0,bottom:0,top:0,backgroundColor:this.bg,display:"flex",flexDirection:"column"},e||(this.showPopup=!0,this.showTrans=!0)},right(e){this.popupstyle="right",this.ani=["slide-right"],this.transClass={position:"fixed",bottom:0,right:0,top:0,backgroundColor:this.bg,display:"flex",flexDirection:"column"},e||(this.showPopup=!0,this.showTrans=!0)}}},[["render",function(e,o,r,d,l,g){const p=x(w("uni-transition"),P),u=c,m=v("keypress");return l.showPopup?(t(),s(u,{key:0,class:n(["uni-popup",[l.popupstyle,g.isDesktop?"fixforpc-z-index":""]])},{default:i((()=>[a(u,{onTouchstart:g.touchstart},{default:i((()=>[l.maskShow?(t(),s(p,{key:"1",name:"mask","mode-class":"fade",styles:l.maskClass,duration:l.duration,show:l.showTrans,onClick:g.onTap},null,8,["styles","duration","show","onClick"])):f("",!0),a(p,{key:"2","mode-class":l.ani,name:"content",styles:l.transClass,duration:l.duration,show:l.showTrans,onClick:g.onTap},{default:i((()=>[a(u,{class:n(["uni-popup__wrapper",[l.popupstyle]]),style:y({backgroundColor:g.bg}),onClick:g.clear},{default:i((()=>[h(e.$slots,"default",{},void 0,!0)])),_:3},8,["style","class","onClick"])])),_:3},8,["mode-class","styles","duration","show","onClick"])])),_:3},8,["onTouchstart"]),l.maskShow?(t(),s(m,{key:0,onEsc:g.onTap},null,8,["onEsc"])):f("",!0)])),_:3},8,["class"])):f("",!0)}],["__scopeId","data-v-a1518068"]]);class O{constructor(e){this.suggestions=[],this.searchSuggestions=e,e.onclick=t=>{t.target.parentElement===e&&"1"===e.style.opacity&&this.onSend(t.target.innerText)},window.addEventListener("scroll",(()=>{let t=document.body.scrollHeight;window.scrollY+window.innerHeight>=t-25?e.style.opacity="1":e.style.opacity="0"})),e.style.opacity="1"}set(e){this.clear(),this.suggestions=e,e.forEach((e=>{let t=document.createElement("a");t.innerText=e,this.searchSuggestions.appendChild(t)}))}get(){return this.suggestions}clear(){this.suggestions=[],this.searchSuggestions.innerHTML=""}onSend(e){console.debug(`onSend方法没有被重写！,用户发送'${e}'`)}}let H=["3.2.50.0->3.5.31.255","3.5.74.0->3.5.133.255","3.12.0.0->3.23.255.255","3.30.0.0->3.33.34.255","3.33.36.0->3.33.255.255","3.40.0.0->3.63.255.255","3.80.0.0->3.95.255.255","3.100.0.0->3.103.255.255","3.116.0.0->3.119.255.255","3.128.0.0->3.247.255.255","4.0.0.0->4.1.179.255","4.1.181.0->4.14.241.255","4.15.21.0->4.16.47.255","4.16.55.0->4.18.65.255","4.18.68.0->4.28.135.255","4.28.139.0->4.31.207.255","4.31.209.0->4.33.203.255","4.33.234.0->4.37.0.255","4.37.2.0->4.42.31.255","4.42.35.0->4.55.87.255","4.55.95.0->4.59.175.255","4.59.179.0->4.71.152.255","4.71.154.0->4.143.255.255","4.148.0.0->4.157.255.255","4.184.0.0->4.184.55.255","4.198.160.0->4.198.255.255","4.203.96.0->4.203.255.255","4.227.0.0->4.227.255.255","4.232.200.0->4.232.255.255","4.236.0.0->4.236.255.255","4.242.0.0->4.242.255.255","4.246.0.0->4.246.255.255","4.248.128.0->4.249.255.255","4.255.0.0->4.255.255.255","5.78.0.0->5.78.255.255","5.153.23.0->5.153.63.255","6.0.0.0->8.3.111.255","8.3.128.0->8.5.250.255","8.5.252.0->8.7.243.255","8.7.245.0->8.10.5.255","8.10.8.0->8.14.121.255","8.14.123.0->8.14.196.255","8.15.0.0->8.17.204.255","8.17.207.0->8.18.49.255","8.18.51.0->8.18.112.255","8.18.197.0->8.19.7.255","8.19.9.0->8.20.99.255","8.20.128.0->8.20.252.255","8.21.42.0->8.21.109.255","8.21.112.0->8.22.175.255","8.22.177.0->8.23.138.255","8.23.140.0->8.23.239.255","8.24.16.0->8.24.241.255","8.24.245.0->8.25.95.255","8.25.99.0->8.25.248.255","8.25.250.0->8.26.93.255","8.26.95.0->8.26.175.255","8.26.181.0->8.27.63.255","8.27.80.0->8.28.3.255","8.28.21.0->8.28.81.255","8.28.83.0->8.28.126.255","8.28.128.0->8.28.200.255","8.28.214.0->8.29.104.255","8.29.106.0->8.29.223.255","8.29.225.0->8.30.207.255","8.30.235.0->8.33.95.255","8.33.138.0->8.34.68.255","8.34.72.0->8.34.145.255","8.34.147.0->8.34.199.255","8.34.224.0->8.35.56.255","8.35.60.0->8.35.148.255","8.35.150.0->8.35.210.255","8.35.212.0->8.36.76.255","8.36.78.0->8.36.129.255","8.36.131.0->8.36.215.255","8.36.221.0->8.37.40.255","8.37.44.0->8.38.146.255","8.38.173.0->8.39.5.255","8.39.19.0->8.39.124.255","8.39.145.0->8.39.200.255","8.39.216.0->8.40.25.255","8.40.32.0->8.40.106.255","8.40.141.0->8.41.4.255","8.41.40.0->8.42.7.255","8.42.9.0->8.42.50.255","8.42.56.0->8.42.160.255","8.42.173.0->8.42.244.255","8.42.246.0->8.43.120.255","8.43.124.0->8.43.223.255","8.44.7.0->8.44.57.255","8.44.93.0->8.45.95.255","8.45.97.0->8.46.112.255","8.46.119.0->8.47.68.255","8.47.70.0->8.49.215.255","8.49.217.0->8.50.11.255","8.50.21.0->8.51.0.255","8.51.64.0->8.127.255.255","8.192.0.0->8.192.108.255","8.192.110.0->8.207.255.255","8.221.0.0->8.221.127.255","8.224.0.0->8.238.42.255","8.238.53.0->8.238.142.255","8.238.205.0->8.241.255.255","8.244.80.0->8.244.130.255","8.244.132.0->8.244.255.255","8.245.64.0->8.245.127.255","8.245.160.0->8.245.255.255","8.246.139.0->8.246.191.255","8.246.201.0->9.9.8.255","9.9.10.0->9.255.255.255","11.0.0.0->11.210.23.255","11.210.25.0->12.5.185.255","12.5.188.0->12.19.87.255","12.19.96.0->12.24.140.255","12.24.142.0->12.35.147.255","12.35.149.0->12.41.127.255","12.41.136.0->12.46.103.255","12.46.106.0->12.129.111.255","12.129.113.0->12.139.119.255","12.139.121.0->12.144.81.255","12.144.88.0->12.159.147.255","12.159.152.0->12.174.223.255","12.175.0.0->12.184.30.255","12.184.32.0->12.192.62.255","12.192.64.0->12.196.47.255","12.196.63.0->12.204.9.255","12.204.16.0->12.206.179.255","12.206.184.0->12.208.168.255","12.208.172.0->13.32.0.255","13.32.176.0->13.32.215.255","13.34.93.0->13.34.255.255","13.35.73.0->13.35.127.255","13.44.0.0->13.47.255.255","13.52.0.0->13.52.255.255","13.56.0.0->13.66.255.255","13.67.128.0->13.68.255.255","13.71.192.0->13.72.191.255","13.73.32.0->13.73.95.255","13.77.64.0->13.77.255.255","13.78.128.0->13.78.255.255","13.82.0.0->13.86.255.255","13.87.127.0->13.88.199.255","13.89.0.0->13.92.255.255","13.93.128.0->13.93.255.255","13.96.0.0->13.103.255.255","13.104.1.0->13.104.41.255","13.105.204.0->13.105.255.255","13.107.55.0->13.107.136.255","13.107.141.0->13.107.197.255","13.107.255.0->13.111.255.255","13.116.0.0->13.120.63.255","13.120.128.0->13.121.64.255","13.121.128.0->13.122.63.255","13.122.128.0->13.123.255.255","13.128.0.0->13.199.255.255","13.216.0.0->13.224.15.255","13.226.9.0->13.226.56.255","13.226.176.0->13.226.243.255","13.240.0.0->13.243.255.255","13.248.128.0->13.248.255.255","13.249.34.0->13.249.143.255","13.249.176.0->13.249.240.255","13.252.0.0->13.255.255.255","15.0.0.0->15.106.75.255","15.106.77.0->15.109.211.255","15.109.213.0->15.113.77.255","15.113.79.0->15.114.96.255","15.114.98.0->15.118.101.255","15.118.103.0->15.119.207.255","15.119.209.0->15.122.23.255","15.122.25.0->15.124.124.255","15.124.128.0->15.127.94.255","15.127.98.0->15.145.19.255","15.145.24.0->15.151.255.255","15.153.0.0->15.155.255.255","15.158.192.0->15.159.255.255","15.162.0.0->15.163.255.255","15.166.0.0->15.167.255.255","15.169.0.0->15.177.23.255","15.177.101.0->15.183.255.255","15.186.0.0->15.187.255.255","15.189.0.0->15.189.255.255","15.190.64.0->15.192.255.255","15.193.11.0->15.195.184.255","15.195.186.0->15.205.255.255","15.208.0.0->15.219.200.255","15.219.202.0->15.220.43.255","15.221.54.0->15.221.127.255","15.221.153.0->15.221.255.255","15.224.0.0->15.227.255.255","15.231.0.0->15.234.255.255","15.238.0.0->15.247.255.255","15.248.72.0->16.0.89.255"];function N(e,t){return Math.floor(Math.random()*(t-e))+e}class U{static get randomAddress(){return this._randomAddress}static set randomAddress(e){this._randomAddress=e}}let F=new URLSearchParams(window.location.search).get("randomAddress");if(F)U.randomAddress=F;else{let e=H[N(0,H.length)].split("->"),t=e[0].split("."),s=e[1].split("."),i="";for(let a=0;a<4;a++)i=i+"."+N(parseInt(t[a]),parseInt(s[a]));i.startsWith(".")&&(i=i.replace(".","")),U.randomAddress=i}async function V(e,t,s){s||(t?t.headers?t.headers.haiBingGoGoWeb="true":t.headers={haiBingGoGoWeb:"true"}:t={headers:{haiBingGoGoWeb:"true"}},t.headers.randomAddress=U.randomAddress);let i=await fetch(e,t),a=new Response(i.body,i);if(a.headers.set("Access-Control-Allow-Origin","*"),a.headers.set("haiBing","true"),a.headers.set("cookieID",0),a.headers.set("Report-Only",""),a.headers.set("Report-To",""),a.headers.get("HaiBingError")){let e=await a.json(),t=new Error(e.message);throw t.value=e.value,t.isHaiBingError=!0,t.theType=e.type,t.theData=e.data,t}return a}class Q{static get cookieID(){return this._cookieID}static set cookieID(e){this._cookieID=e,console.log("cookieID已设置为"+Q.cookieID)}}let J=new URLSearchParams(window.location.search).get("cookieID");J&&(Q.cookieID=J);const j=e=>new Promise((t=>setTimeout(t,e)));class ${static format(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+"-"+e.getMinutes()+"-"+e.getSeconds()}}class z{constructor(e,t){this.throttling={maxNumUserMessagesInConversation:0,numUserMessagesInConversation:0},this.renderMathInElementOptions={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1},this.chatSuggestionsWorker=t,this.chatDiv=e,this.chatDiv.parserReturnWorker=this,window.addEventListener("message",(e=>{let t=e.data;if("AnswerCardDimensionUpdate"===t.type||"AnswerCardResize"===t.type){let e=document.getElementById(t.data.iframeid),s=document.getElementById(t.data.iframeid+"Card");s&&(s.style.width=t.data.width+"px",s.style.height=t.data.height+"px"),e&&(t.data.width<0||t.data.height<=0?e.classList.add("onshow"):e.classList.remove("onshow"))}})),e.addEventListener("click",(async function(e){if(e.target.classList.contains("copy-bingcat-markdown")){let t=e.target.parentElement.parentElement.getElementsByClassName("textBlock")[0].dataset.the_markdown_text,s=t.startsWith("[")?t.indexOf("\n\n")+2:0,i=t.substring(s),a=0==s?"":t.substring(0,s),n=$.format(new Date);A({data:`${i}\n信息源:与haiBing海冰的对话 (${n})\n${a}`,success:function(){k({title:"复制成功",duration:1500})}})}if(e.target.classList.contains("code-copy")){let t=e.target.parentElement;await navigator.clipboard.writeText(t.innerText)}}))}getByID(e,t,s){let i=document.getElementById(e);if(!i){i=document.createElement(t),i.id=e;for(let e=3;e<arguments.length;e++)arguments[e]&&i.classList.add(arguments[e]);s.appendChild(i)}return i}getByClass(e,t,s){let i=s.getElementsByClassName(e)[0];if(!i){i=document.createElement(t),i.classList.add(e);for(let e=3;e<arguments.length;e++)arguments[e]&&i.classList.add(arguments[e]);s.appendChild(i)}return i}restart(e){this.chatDiv.innerHTML=`\n\t\t<div class="bing">\n\t\t\t<div class="adaptiveCardsFatherDIV">\n\t\t\t\t<div class="textBlock markdown-body">\n\t\t\t\t\t${e}\n\t\t\t\t</div>\n                \n\t\t\t\t<div class="throttling">\n\t\t\t\t\t0 / 0\n\t\t\t\t</div>\n                <div class="sourceAttributions">\n\t\t\t\t</div>\n                \n\t\t\t</div>\n\t\t</div>\n\t\t`}setMyChat(e,t,s){t||(t=`my_${(new Date).getTime()}`);let i=this.getByID(t,"div",this.chatDiv);if(i.classList.add("my"),!e)return i.remove(),t;s?i.classList.add("preview"):i.classList.remove("preview");let a=this.getByClass("bobo","pre",i);return a.innerText=e,a.classList.add("markdown-body"),t}addError(e){let t=document.createElement("div");t.classList.add("error"),t.innerHTML=e,this.chatDiv.appendChild(t)}addNoPower(){let e=document.createElement("div");e.classList.add("NoPower"),e.innerText=">>> 点击尝试申请加入候补名单获取NewBing聊天权限 <<<",this.chatDiv.appendChild(e),e.onclick=async()=>{if(!e.geting){e.geting=!0,e.innerHTML="正在请求申请加入候补名单..";try{let t=window.location.origin.includes("docgpt")||window.location.origin.includes(".workers.")?window.location.origin:"https://binggo2.docgpt.top";await V(`${t}/msrewards/api/v1/enroll?publ=BINGIP&crea=MY00IA&pn=bingcopilotwaitlist&partnerId=BingRewards&pred=true&wtc=MktPage_MY0291`),e.innerHTML="请求成功！请刷新页面重试，如果无权限使用请等待几天后重试。"}catch(t){e.innerHTML="发生错误："+t.message}}}}addNoLogin(){let e=document.createElement("a");e.classList.add("NoPower"),e.innerText=">>> 点击跳转到登录页面 <<<",e.style.display="block",this.chatDiv.appendChild(e),e.href="https://login.live.com/login.srf?wa=wsignin1.0&rpsnv=13&id=264960&wreply=https%3A%2F%2Fcn.bing.com%2Fsecure%2FPassport.aspx%3Fedge_suppress_profile_switch%3D1%26requrl%3Dhttps%253a%252f%252fcn.bing.com%252f%253fwlexpsignin%253d1&wp=MBI_SSL&lc=2052&aadredir=1",e.target="_blank"}test(e){this.porserArguments(e.arguments)}porserType2Item(e,t){let s=document.getElementById("chat");if(e.result){let t=e.result;if("Success"===t.value);else if("Throttled"===t.value)this.addError(t.message),this.addError("24消息请求数达到了限制！");else if("CaptchaChallenge"===t.value){this.addError(t.message),this.addError(`当前账号请求过多，需要通过机器人检查！第${Q.cookieID}个账号`);let e=new URL(window.location.href);e.searchParams.set("cookieID",Q.cookieID),e.searchParams.set("randomAddress",U.randomAddress);let s=new URLSearchParams;s.append("cookieID",Q.cookieID),s.append("redirect",e.href),s.append("randomAddress",U.randomAddress),this.addError(`<p><a href="./chatimgcaptcha.html?${s.toString()}">点击前往验证</a></p>`)}else this.addError(t.message),this.addError("发生未知错误！")}if(e.throttling&&(this.throttling=e.throttling),e.messages){let t=this.getByID(e.requestId,"div",s,"bing");this.porserMessages(e.messages,t),t.innerHTML||t.remove()}}addCAPTCHA(){let e=this.getByID((new Date).getTime()+"CAPTCHA","div",this.chatDiv);e.classList.add("CAPTCHAIframeDIV");let t=document.createElement("iframe");t.classList.add("CAPTCHAIframe"),t.src="https://www.bing.com/turing/captcha/challenge",e.appendChild(t)}porserArguments(e,t){for(let s=0;s<e.length;s++)this.porserType2Item(e[s],t)}porserMessages(e,t){for(let s=0;s<e.length;s++){let i=e[s];if("user"!==i.author)if(!i.messageType&&i.adaptiveCards){let e=this.getByID(i.messageId,"div",t,"adaptiveCardsFatherDIV");if(this.porserAdaptiveCards(i.adaptiveCards,e),i.sourceAttributions&&i.sourceAttributions.length>0){let t=this.getByID(i.messageId+"sourceAttributions","div",e,"sourceAttributions");this.porserSourceAttributions(i.sourceAttributions,t)}i.suggestedResponses&&this.porserSuggestedResponses(i.suggestedResponses)}else if("InternalSearchQuery"===i.messageType){let e=this.getByID(i.messageId,"div",t,"InternalSearchQuery");this.porserLineTextBlocks(i.text,e)}else if("InternalSearchResult"===i.messageType);else if("InternalLoaderMessage"===i.messageType){let e=this.getByID(i.messageId,"div",t,"InternalLoaderMessage");this.porserLineTextBlocks(i.text,e)}else if("GenerateContentQuery"===i.messageType){let e=this.getByID(i.messageId,"div",t,"GenerateContentQuery");this.generateContentQuery(i,e)}else if("RenderCardRequest"===i.messageType)this.renderCardRequest(i,t);else if("Disengaged"===i.messageType){this.getByID(i.messageId,"div",this.chatDiv,"error").innerHTML=`${i.hiddenText}<br>聊天中断！试试开始新主题？`}else"TurnLimiter"===i.contentOrigin?(this.addError(i.text),this.addError("同主题对话达到限量，试试开始新主题？")):console.log("发现一个另类message:  ",JSON.stringify(i))}}renderCardRequest(e,t){let s=e.messageId;if(t[s+"renderCardRequest"])return;t[s+"renderCardRequest"]=!0;let i=new URLSearchParams;i.append("showselans",1),i.append("q",e.text),i.append("iframeid",s);let a="https://www.bing.com/search?"+i.toString(),n=this.getByID(s,"div",t,"RenderCardRequest");n.classList.add("onshow");let o=document.createElement("iframe");o.id=s+"Card",o.role="presentation",o.src=a,n.appendChild(o)}generateContentQuery(e,t){if("IMAGE"===e.contentType){if(t.runed)return;t.runed=!0,this.generateContentQueryImg(e,t).then()}else console.log("发现一个另类generateContentQuery: ",JSON.stringify(e))}async generateContentQueryImg(e,t){let s;t.innerText=`正在生成’${e.text}‘的图片.`;try{s=await async function(e,t,s){let i=new URLSearchParams;i.append("re","1"),i.append("showselective","1"),i.append("sude","1"),i.append("kseed","7500"),i.append("SFX","2"),i.append("q",e),i.append("iframeid",t);let a=window.location.origin.includes("docgpt")||window.location.origin.includes(".workers.")?window.location.origin:"https://binggo2.docgpt.top",n=`${a}/images/create?${i.toString()}`,o=await V(n,Q.cookieID?{headers:{cookieID:Q.cookieID}}:void 0),r=await o.text(),h=o.headers.get("cookieID"),d=new RegExp('class="gil_err_mt">([^<>]*)</div>').exec(r);if(d&&d[1]){let e=`<h3>${d[1]}</h3>`;throw d=new RegExp('class="gil_err_sbt">(([^<>]*<(a|div)[^<>]*>[^<>]*</(a|div)>[^<>]*)*)</div>').exec(r),d&&d[1]&&(e+=`<p>${d[1]}</p>`),new Error(e)}if(d=new RegExp('"/(images/create/async/results/(\\S*))"').exec(r),!d||!d[1])throw console.log(r),new Error("请求图片返回不正确的页面，无法加载图片。");let c=d[1];c=c.replaceAll("&amp;","&");let l=`${a}/${c}`;for(let p=1;p<=20;p++){let e;s&&"function"==typeof s&&s(p),await j(3e3);try{e=await(await V(l,{headers:{cookieID:h}})).text()}catch(g){if(console.error(g),g.isHaiBingError)throw g}if(!e)continue;let t,i=e.matchAll(/<img[^<>]*src="([^"]*)"[^<>]*>/g),a=[];for(;!(t=i.next()).done;)a[a.length]={img:t.value[1].split("?")[0],mImg:t.value[1].replaceAll("&amp;","&")};if(a.length>0)return a;throw new Error("服务器未正常返回图片！")}}(e.text,e.requestId,(s=>{t.innerText=`正在生成’${e.text}‘的图片.${s}`}))}catch(n){return console.warn(n),void(t.innerHTML=n.message)}let i=new URLSearchParams;i.append("createmessage",e.text),t.innerHTML="";let a=document.createElement("a");t.appendChild(a),s.forEach((e=>{i.append("imgs",e.img);let t=document.createElement("img");t.src=e.mImg,a.appendChild(t)})),a.target="_blank",a.href="./imgs.html?"+i.toString()}porserAdaptiveCards(e,t){for(let s=0;s<e.length;s++){let i=e[s];"AdaptiveCard"===i.type?this.porserbody(i.body,t):console.log("发现一个不是AdaptiveCard的adaptiveCard:  ",JSON.stringify(i))}}porserbody(e,t){for(let s=0;s<e.length;s++){let i=e[s];"TextBlock"===i.type?this.porserTextBlock(i,t):console.log("发现一个不是TextBlock的body",JSON.stringify(i))}}completeCodeBlock(e){let t=function(e,t,s,i){let a=!0,n=i.split("\n");for(let o=0;o<=n.length;o++)a?e.test(n[o])&&(a=!1):t.test(n[o])&&(a=!0);return a||(i+=s),i};return t(new RegExp("^~~~.*$"),new RegExp("^~~~( *)$"),"\n~~~",t(new RegExp("^```.*$"),new RegExp("^```( *)$"),"\n```",e))}porserTextBlock(e,t){if(e.size)e.size;else{let s=this.getByClass("textBlock","div",t,"markdown-body");if(s.dataset.the_markdown_text&&s.dataset.the_markdown_text.length>e.text.length){s.classList.remove("textBlock"),s.classList.add("textBlockDeleted");let e=document.createElement("div");e.classList.add("textBlockDeletedEnd"),e.innerHTML='[以上被撤回的信息可能包不适宜的内容，已被隐藏。] <input type="checkbox">显示',G(e,s);let i=this.getByClass("textBlock","div",t,"markdown-body");G(i,e),s=i}s.dataset.the_markdown_text=e.text,s.innerHTML=marked.marked(this.completeCodeBlock(e.text)),renderMathInElement(s,this.renderMathInElementOptions);for(let e of s.getElementsByTagName("pre")){let t=document.createElement("div");t.classList.add("code-copy"),e.appendChild(t)}let i=s.getElementsByTagName("a");for(let e=0;e<i.length;e++)i[e].target="_blank";for(let e=0;e<i.length;e++){let t=new RegExp("^\\^(\\d+)\\^$");t.test(i[e].innerHTML)&&(i[e].innerHTML=i[e].innerHTML.replace(t,"$1"),i[e].classList.add("superscript"))}let a=this.getByClass("throttling","div",t);this.throttling.nxdiv=a,a.innerHTML=`\n<div class="copy-bingcat-markdown click "style="font-size: 1.1rem;" >复制</div>\n<div>${this.throttling.numUserMessagesInConversation} / ${this.throttling.maxNumUserMessagesInConversation}</div>`}}updateCostTime(e){if(this.throttling.nxdiv){let t=this.throttling.nxdiv;t.innerHTML=`<div "style="padding-right:0.2rem" >耗时:${e}s</div> `+t.innerHTML}}porserLineTextBlocks(e,t){t.innerHTML=`<p>${e}</p>`}porserSourceAttributions(e,t){let s="";for(let i=0;i<e.length;i++){let t=e[i];s+=`<a target="_blank" href="${t.seeMoreUrl}">${i+1}.&nbsp&nbsp${t.providerDisplayName}</a>`}t.innerHTML=s}porserSuggestedResponses(e){let t=[];for(let s=0;s<e.length;s++)t[t.length]=e[s].text;this.chatSuggestionsWorker?this.chatSuggestionsWorker.set(t):console.debug("chatSuggestionsWorker为null")}getOnMessageFun(e){return(t,s)=>"close"===t.type?(console.log(t.mess),void(t.ok?e(new Y("close","回复结束")):(this.addError("聊天异常中断了！可能是网络问题。"),e(new Y("close-accident","意外关闭"))))):"error"===t.type?(this.addError("连接发生错误："+t.mess),void e(new Y("error","回复结束"))):void(3===t.type?(t.error&&(this.addError(t.error),this.addError("发生未知错误")),s.close()):1===t.type?this.porserArguments(t.arguments,s):2===t.type?this.porserType2Item(t.item,s):console.log(JSON.stringify(t)))}}class Y{constructor(e,t){this.type=e,this.message=t}}function G(e,t){let s=t.parentNode;s.lastChild===t?s.appendChild(e):s.insertBefore(e,t.nextSibling)}const W=class{constructor(e,t,s,i,a){this._chatType=W.ChatType.Balanced,this.backgroundDIV=e,this.chatTypeChoseCreate=t,this.chatTypeChoseBalance=s,this.chatTypeChoseAccurate=i,this.chatTypeDiv=a;let n=e=>{if(this._chatType===e)return;let t=W.ChatType[e];if(!t)throw new Error("错误的聊天类型:"+e);this._chatType=t,this.updateShow(),this.onChatTypeChange(this._chatType,!0)};t.onclick=()=>{"0"!==a.style.opacity&&n(W.ChatType.Creative)},s.onclick=()=>{"0"!==a.style.opacity&&n(W.ChatType.Balanced)},i.onclick=()=>{"0"!==a.style.opacity&&n(W.ChatType.Precise)};let o=new URL(window.location.href).searchParams.get("ChatMode");if(o){let e=W.ChatType[o];e&&(this.chatType=e)}}get chatType(){return this._chatType}set chatType(e){if(this._chatType===e)return;let t=W.ChatType[e];if(!t)throw new Error("错误的聊天类型:"+e);this._chatType=t,this.updateShow(),this.onChatTypeChange(this._chatType,!1)}updateShow(){this.chatType===W.ChatType.Creative?(this.chatTypeChoseCreate.classList.add("Chose"),this.chatTypeChoseBalance.classList.remove("Chose"),this.chatTypeChoseAccurate.classList.remove("Chose"),this.backgroundDIV.classList.remove("b","c"),this.backgroundDIV.classList.add("a")):this.chatType===W.ChatType.Balanced?(this.chatTypeChoseCreate.classList.remove("Chose"),this.chatTypeChoseBalance.classList.add("Chose"),this.chatTypeChoseAccurate.classList.remove("Chose"),this.backgroundDIV.classList.remove("a","c"),this.backgroundDIV.classList.add("b")):this.chatType===W.ChatType.Precise?(this.chatTypeChoseCreate.classList.remove("Chose"),this.chatTypeChoseBalance.classList.remove("Chose"),this.chatTypeChoseAccurate.classList.add("Chose"),this.backgroundDIV.classList.remove("a","b"),this.backgroundDIV.classList.add("c")):console.warn("错误的聊天类型",this.chatType)}onChatTypeChange(e,t){console.debug(`onChatTypeChange方法没有被重写！,聊天类型切换到'${e}'`)}show(){this.chatTypeDiv.style.opacity="1"}hide(){this.chatTypeDiv.style.opacity="0"}};let X=W;X.ChatType={Creative:"Creative",Balanced:"Balanced",Precise:"Precise"};class q{constructor(e){let t=window.scrollY+window.innerHeight>=document.body.scrollHeight-10;new MutationObserver((()=>{t&&window.scrollTo(0,document.body.scrollHeight)})).observe(e,{childList:!0,attributes:!0,subtree:!0}),window.addEventListener("scroll",(function(){t=window.scrollY+window.innerHeight>=document.body.scrollHeight-10}))}}class K{static crateFromObj(e,t){return new K(e,t.conversationId,t.clientId,t.conversationSignature,t.optionsSets,t.invocationId)}saveToObj(){return{conversationId:this.conversationId,clientId:this.clientId,conversationSignature:this.conversationSignature,optionsSets:this.optionsSets,invocationId:this.invocationId}}constructor(e,t,s,i,a,n){this.bingChat=e,this.invocationId=n||1,this.conversationId=t,this.clientId=s,this.conversationSignature=i,this.optionsSets=a||"Balanced"}async sendJson(e,t){let s=JSON.stringify(t)+"";await e.send(s),console.log("发送",s)}async sendShakeHandsJson(e){await this.sendJson(e,{protocol:"json",version:1})}async sendChatMessage(e,t){await this.sendJson(e,await this.bingChat.chatOptionsSets.getSendJson(this,t)),this.invocationId++}}class Z{constructor(e,t,s){this.closed=!1,this.bingChating=s,this.catWebSocket=e,this.onMessage=[e=>{}],"function"==typeof t&&this.regOnMessage(t),e.onmessage=e=>{let t=e.data.split("");for(let i=0;i<t.length;i++)if(""!==t[i])for(let e in this.onMessage)if("function"==typeof this.onMessage[e])try{this.onMessage[e](JSON.parse(t[i]),this)}catch(s){console.warn(s)}},e.onclose=e=>{for(let s in this.onMessage)if("function"==typeof this.onMessage[s])try{this.onMessage[s]({type:"close",ok:this.closed,mess:e.reason},this)}catch(t){console.warn(t)}},e.onerror=e=>{console.log(e);for(let s in this.onMessage)if("function"==typeof this.onMessage[s])try{this.onMessage[s]({type:"error",mess:e.message?e.message:"异常中断"},this)}catch(t){console.warn(t)}}}regOnMessage(e){this.onMessage[this.onMessage.length]=e}outOnMessage(e){for(let t=0;t<this.onMessage.length;t++)if(this.onMessage[t]===e)return void this.onMessage.splice(t,1)}close(){this.closed=!0,this.catWebSocket.close(1e3,"ok")}}class ee{static create(e,t,s,i,a,n){let o=new ee;return o.bingChat=e,o.sendMessageManager=new K(e,t,s,i,a,n),o}static createIn(e,t){let s=new ee;return s.bingChat=e,s.sendMessageManager=t,s}async sendMessage(e,t){let s;!window.location.origin.includes("docgpt")&&!window.location.origin.includes(".workers.")||window.location.origin;let i=new URLSearchParams;i.append("randomAddress",U.randomAddress),s=`wss://bing.vcanbb.top/sydney/ChatHub?${i.toString()}`;try{let i=new WebSocket(s),a=new Z(i,t,this);i.onopen=()=>{this.sendMessageManager.sendShakeHandsJson(i)};let n=async t=>{"{}"===JSON.stringify(t)&&(await this.sendMessageManager.sendJson(i,{type:6}),await this.sendMessageManager.sendChatMessage(i,e),a.outOnMessage(n))};return a.regOnMessage(n),a.regOnMessage((async e=>{6===e.type&&await this.sendMessageManager.sendJson(i,{type:6})})),a}catch(a){throw console.warn(a),a.isHaiBingError?new Error(a.message):new Error("无法连接到web服务器，请刷新页面重试:"+a.message)}}}class te{constructor(e,t){this.chatFirstMessages=e,this.chatOptionsSets=t}end(){this.bingChating=void 0}isStart(){return!!this.bingChating}sendMessage(e,t){if(!this.isStart())throw new Error("聊天没有开始，需要先使用start方法开始聊天");return this.bingChating.sendMessage(e,((e,s)=>{t(e,s)}))}retry(e,t,s=3,i=1e3){return new Promise(((a,n)=>{e().then(a).catch((o=>{setTimeout((()=>{s<1?t&&t(o):(console.error(`Retrying${s} after ${i}ms  due to:`,o),this.retry(e,t,s-1,i).then(a,n))}),i)}))}))}async start(e,t){return this.retry((()=>this.startChat(e)),t,5,1e3)}async startChat(e){if(this.isStart())throw new Error("聊天已经开始了，需要使用end方法结束后再重新开始。");let t,s=window.location.origin.includes("docgpt")||window.location.origin.includes(".workers.")?window.location.origin:"https://binggo2.docgpt.top";try{t=await V(`${s}/turing/conversation/create`,Q.cookieID?{headers:{cookieID:Q.cookieID}}:void 0)}catch(r){throw console.warn(r),r.isHaiBingError?r:new Error("无法连接到web服务器，请刷新页面重试:"+r.message)}let i="被拒绝服务,请刷新网页",a=t.headers.get("cookieID");if(404===t.status)throw new Error(i+1);let n=await t.text();if(console.log("BingChat.js json:"+n),n.length<1)throw"self"===a?new Error(i+2):new Error(i+3);let o=JSON.parse(n);if(!o.result)throw console.warn(o),new Error("未知错误！");if("Success"!==o.result.value){console.warn(o);let e=o.result.value,t=o.result.message;"UnauthorizedRequest"===o.result.value?(e="NoLogin",t=i+4):"Forbidden"===o.result.value&&(e="NoPower",t=i+5);let s=new Error(t);throw s.type=e,s}return this.bingChating=ee.create(this,o.conversationId,o.clientId,o.conversationSignature,e,void 0),Q.cookieID=a,this}}class se{constructor(e,t,s){this._open=!1,e&&(this.button=e,this.change=t,this.fun=s||(()=>{}),e.addEventListener("click",(()=>{this.open=!this.open})))}get open(){return this._open}set open(e){!!e!==this._open&&this.onChange(e)}onChange(e){!1!==this.fun(e)&&(this._open=e,this._open?this.change.classList.add("open"):this.change.classList.remove("open"))}}class ie{constructor(){this.content={}}static loadFromObj(e,t){let s=new ie;return s.id=t,s.name=e.name,s.creationTime=e.creationTime,s.content=e.content,s}static create(e,t){let s=new ie;return s.name=e,s.content=t,s.creationTime=$.format(new Date),s}saveToObj(){return{name:this.name,creationTime:this.creationTime,content:this.content}}}class ae{static chatRecords(){let e=localStorage.chatRecords,t=e?JSON.parse(e):{};delete t.nextIndex;let s=[];for(let i in t)s.push(ie.loadFromObj(t[i],i));return s}static get(e){let t=localStorage.chatRecords,s=(t?JSON.parse(t):{})[e];return s?ie.loadFromObj(s,e):void 0}static add(e){if(e.id)throw new Error("此聊天记录已经被添加到聊天记录，请使用update方法更新");let t=localStorage.chatRecords,s=t?JSON.parse(t):{};return s.nextIndex||(s.nextIndex=1),e.id=s.nextIndex,s[s.nextIndex++]=e.saveToObj(),localStorage.chatRecords=JSON.stringify(s),e}static resetDB(){localStorage.chatRecords=JSON.stringify({})}static delete(e){if(!e.id)return;let t=localStorage.chatRecords,s=t?JSON.parse(t):{};s[e.id]=void 0,localStorage.chatRecords=JSON.stringify(s)}static update(e){if(!e.id)throw new Error("使用create创建的聊天记录，不可以使用update方法。");let t=localStorage.chatRecords,s=t?JSON.parse(t):{};s[e.id]=e.saveToObj(),localStorage.chatRecords=JSON.stringify(s)}}class ne{constructor(e,t,s,i,a,n,o){this.bingChat=e,this.chatModeSwitchingWorker=t,this.chatSuggestionsWorker=s,this.parserReturnWorker=i,this.chatRecordDIV=a,this.newChatRecordDIV=n,this.cleanRecord=o,this.newChatRecordDIV.addEventListener("click",(()=>{this.addRecord()})),this.deitDiv=document.createElement("div"),this.deitDiv.classList.add("ChatRecordsListDiv_div"),this.deitDiv.classList.add("ChatRecordsListDiv_div_edit"),this.deitDiv.addEventListener("click",(e=>{e.stopPropagation()})),this.deitDiv.rename=document.createElement("input"),this.deitDiv.rename.classList.add("ChatRecordsListDiv_div_input"),this.deitDiv.rename.type="text",this.deitDiv.rename.addEventListener("change",(e=>{e.stopPropagation(),this.userChatRecord&&(this.rename(this.deitDiv.rename.value),this.updateList())})),this.deitDiv.idDiv=document.createElement("div"),this.deitDiv.idDiv.classList.add("ChatRecordsListDiv_div_id"),this.deitDiv.timeDiv=document.createElement("div"),this.deitDiv.timeDiv.classList.add("ChatRecordsListDiv_div_time"),this.deitDiv.deleteDiv=document.createElement("div"),this.deitDiv.deleteDiv.classList.add("ChatRecordsListDiv_div_delete"),this.deitDiv.deleteDiv.innerHTML="✖",this.deitDiv.deleteDiv.addEventListener("click",(e=>{e.stopPropagation(),this.delete(),this.updateList()})),this.deitDiv.appendChild(this.deitDiv.idDiv),this.deitDiv.appendChild(this.deitDiv.rename),this.deitDiv.appendChild(this.deitDiv.timeDiv),this.deitDiv.appendChild(this.deitDiv.deleteDiv)}isEmpty(e){return!e||""==e}addRecord(e){e=(e=this.isEmpty(e)?"新聊天":e).length>45?e.substring(0,45)+"...":e,this.crate(e),this.updateList()}updateList(){this.chatRecordDIV.innerHTML="",ae.chatRecords().forEach((e=>{if(this.userChatRecord&&e.id==this.userChatRecord.id)this.deitDiv.idDiv.innerHTML=e.id,this.deitDiv.rename.value=e.name,this.deitDiv.timeDiv.innerHTML=e.creationTime,this.chatRecordDIV.appendChild(this.deitDiv);else{let t=document.createElement("div");t.innerHTML=`\n                    <div class="ChatRecordsListDiv_div_id">${e.id}</div>\n                    <div class="ChatRecordsListDiv_div">${e.name}<br>\n                    ${e.creationTime}\n                    </div> `,t.addEventListener("click",(()=>{this.openByChatRecord(e),this.updateList()})),this.chatRecordDIV.appendChild(t)}}))}deleteAll(){ae.resetDB(),this.chatRecordDIV.innerHTML="",this.userChatRecord=void 0}open(e){let t=ae.get(e);if(!t)throw Error(`id为${e}的聊天记录不存在。`);this.openByChatRecord(t)}openByChatRecord(e){let t={chatRecord:e,isCanExecute:!0};if(this.onOpenChatRecord(t),!t.isCanExecute)return;this.userChatRecord=e;let s=e.content;this.chatModeSwitchingWorker.chatType=s.chatOptionsSets,s.chatData?(this.bingChat.bingChating=ee.createIn(this.bingChat,K.crateFromObj(this.bingChat,s.chatData)),this.chatModeSwitchingWorker.hide()):(this.bingChat.bingChating=void 0,this.chatModeSwitchingWorker.show()),this.chatSuggestionsWorker.set(s.chatSuggestions),this.parserReturnWorker.chatDiv.innerHTML=s.chatDivHtml,this.deitDiv.value=e.name}save(){if(!this.userChatRecord)throw Error("需要先创建一个聊天记录才能保存哦！");this.userChatRecord.content=this.getData(),ae.update(this.userChatRecord)}crate(e){this.userChatRecord=ie.create(e,{}),this.deitDiv.value=e,this.userChatRecord.content=this.getData(),ae.add(this.userChatRecord)}getData(){let e={};return this.bingChat.isStart()&&(e.chatData=this.bingChat.bingChating.sendMessageManager.saveToObj()),e.chatOptionsSets=this.chatModeSwitchingWorker.chatType,e.chatSuggestions=this.chatSuggestionsWorker.get(),e.chatDivHtml=this.parserReturnWorker.chatDiv.innerHTML,e}rename(e){if(!this.userChatRecord)throw Error("需要先创建一个聊天记录才能重命名哦！");this.userChatRecord.name=e,ae.update(this.userChatRecord)}delete(){if(!this.userChatRecord)throw new Error("当前没有打开任何聊天记录。");ae.delete(this.userChatRecord),this.userChatRecord=void 0}close(){this.userChatRecord=void 0}isOpen(){return!!this.userChatRecord}onOpenChatRecord(e){console.log("没被实现",e)}}class oe{constructor(){this.bingProposes=[],this.bingmMessages=["请提问..."],this.StartMessage=this.bingmMessages[0],this.Proposes=[this.bingProposes[0],this.bingProposes[1],this.bingProposes[2]]}async nextStartProposes(){return this.Proposes[0]=this.bingProposes[Math.floor(Math.random()*this.bingProposes.length)],this.Proposes[1]=this.bingProposes[Math.floor(Math.random()*this.bingProposes.length)],this.Proposes[2]=this.bingProposes[Math.floor(Math.random()*this.bingProposes.length)],this.Proposes}async nextStartMessage(){return this.StartMessage=this.bingmMessages[0]}getStartMessage(){return this.StartMessage}getStartProposes(){return this.Proposes}}function re(e,t,s,i,a,n,o,r,h){let d=URL.createObjectURL(new Blob).split("/")[3];return{arguments:[{source:"cib",optionsSets:e,allowedMessageTypes:["ActionRequest","Chat","Context","InternalSearchQuery","InternalSearchResult","Disengaged","InternalLoaderMessage","Progress","RenderCardRequest","AdsQuery","SemanticSerp","GenerateContentQuery","SearchQuery"],sliceIds:["winmuid1tf","osbsdusgreccf","contansperf","mlchatpc2","winstmsg2tf","creatgoglt2","creatorv2t","norespwcf","0521dur5","dur5","517opinion","418dhlths0","525ptrcp","kcimgv2cf","kcimgatt","427startpms0"],verbosity:"verbose",traceId:URL.createObjectURL(new Blob).split("/")[3].replace(/-/g,""),isStartOfSession:s,message:{locale:"zh-CN",market:"zh-CN",region:"US",location:"lat:47.639557;long:-122.128159;re=1000m;",locationHints:[{Center:{Latitude:30.474103707944767,Longitude:114.39625306330366},RegionType:2,SourceType:11},{country:"United States",state:"Washington",city:"Index",zipcode:"98256",timezoneoffset:-8,dma:819,countryConfidence:9,Center:{Latitude:47.8201,Longitude:-121.5543},RegionType:2,SourceType:1}],timestamp:i,author:"user",inputMethod:"Keyboard",text:a,messageType:"Chat",requestId:d,messageId:d},tone:t,requestId:d,conversationSignature:n,participant:{id:o},conversationId:r}],invocationId:h,target:"chat",type:4}}class he{async getSendJson(e,t){return e.startTime||(e.startTime=function(){let e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1).toString().padStart(2,"0")+"-"+e.getDate().toString().padStart(2,"0")+"T"+e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")+":"+e.getSeconds().toString().padStart(2,"0")+"+08:00"}()),re(function(e){let t={Creative:["nlu_direct_response_filter","deepleo","disable_emoji_spoken_text","responsible_ai_policy_235","enablemm","h3imaginative","objopinion","eredirecturl","dv3sugg","autosave","clgalileo","gencontentv3","prompttrcp"],Balanced:["nlu_direct_response_filter","deepleo","disable_emoji_spoken_text","responsible_ai_policy_235","enablemm","galileo","objopinion","eredirecturl","dv3sugg","autosave","saharagenconv5"],Precise:["nlu_direct_response_filter","deepleo","disable_emoji_spoken_text","responsible_ai_policy_235","enablemm","h3precise","objopinion","eredirecturl","dv3sugg","autosave","clgalileo","gencontentv3","prompttrcp"]}[e];if(!t)throw new Error("不存在的ChatType:"+e);return t}(e.optionsSets),e.optionsSets,e.invocationId<=1,e.startTime,t,e.conversationSignature,e.clientId,e.conversationId,e.invocationId.toString())}}const de=D({data:()=>({predivMessageID:void 0,parserReturnMessage:void 0,bingChat:void 0,chatSuggestionsManager:void 0,chatModeSwitchingManager:void 0,titleManager:void 0,windowScrollingWorker:void 0,inputMaxSwitch:void 0,chatRecordWorker:void 0,chatRecordShowSwitch:void 0,restart_button:void 0,input_text:void 0,inputTextValue:"",inputTextPlaceHolder:"",send_button:void 0,isSpeaking:void 0,fontNum:0,loadImg:void 0,chatRecordsListdiv:void 0,chatRecordsServer:void 0,showChatRecords:void 0,tail:void 0,keyboardHeight:0,screenHeight:window.innerHeight,systemInfo:C(),returnMessage:void 0,sendButtonValue:"发送",startSpeakingTime:0,endSpeakingTime:0,costTime:0}),onLoad(){},onReady(){this.loadData()},mounted(){},methods:{riseTextarea(){this.keyboardHeight=this.screenHeight-window.innerHeight,this.keyboardHeight||"android"!=this.systemInfo.osName||window.setTimeout(this.updateKeyboardHeight,400)},updateKeyboardHeight(){this.keyboardHeight=this.screenHeight-window.innerHeight,this.keyboardHeight||this.tail.classList.contains("tail_up")||this.tail.classList.add("tail_up")},downTextarea(){this.tail.classList.remove("tail_up")},clearScreen(){this.chatRecordShowSwitch._open&&this.showChatRecords.click()},showCleanRecord(){this.$refs.cleanRecordPop.open("center")},cleanRecordCancel(){this.$refs.cleanRecordPop.close()},cleanRecordConfirm(){this.chatRecordWorker&&this.chatRecordWorker.deleteAll(),this.$refs.cleanRecordPop.close()},async loadData(){this.restart_button=document.getElementById("restart"),this.input_text=document.getElementById("input"),this.send_button=document.getElementById("send"),this.chatRecordsListdiv=document.getElementById("ChatRecordsListdiv"),this.chatRecordsServer=document.getElementById("ChatRecordsServer"),this.showChatRecords=document.getElementById("showChatRecords"),this.tail=document.getElementById("tail"),this.windowScrollingWorker=new q(document.getElementById("chat")),this.bingChat=new te(new oe,new he),this.chatSuggestionsManager=new O(document.getElementById("SearchSuggestions")),this.parserReturnMessage=new z(document.getElementById("chat"),this.chatSuggestionsManager),this.chatModeSwitchingManager=new X(document.body,document.getElementById("chatTypeChoseCreate"),document.getElementById("chatTypeChoseBalance"),document.getElementById("chatTypeChoseAccurate"),document.getElementById("chatTypediv")),this.inputMaxSwitch=new se(document.getElementById("expand"),this.tail),this.chatRecordWorker=new ne(this.bingChat,this.chatModeSwitchingManager,this.chatSuggestionsManager,this.parserReturnMessage,this.chatRecordsListdiv,this.chatRecordsServer),this.chatRecordShowSwitch=new se(this.showChatRecords,document.getElementById("ChatRecordsListdivOut"),(e=>{e&&this.chatRecordWorker.updateList()})),this.isSpeaking=!1,this.predivMessageID=void 0,this.chatRecordWorker.onOpenChatRecord=e=>{if(this.isSpeaking)return e.isCanExecute=!1,void k({title:"请等待本次对话结束",duration:2e3});this.returnMessage&&(this.returnMessage.close(),this.returnMessage=void 0)},this.input_text.addEventListener("keydown",(e=>{this.inputMaxSwitch.open||("Enter"!==e.key||e.ctrlKey?"Enter"===e.key&&e.ctrlKey&&(e.preventDefault(),this.inputTextValue+="\r\n"):(e.preventDefault(),this.onSend()))})),this.chatModeSwitchingManager.onChatTypeChange=(e,t)=>{t&&this.reSetStartChatMessage().then()},this.chatSuggestionsManager.onSend=this.send,this.restart_button.onclick=()=>{this.returnMessage&&(this.returnMessage.close(),this.returnMessage=void 0),this.bingChat.end(),this.isSpeakingFinish(),this.reSetStartChatMessage().then(),this.chatModeSwitchingManager.show(),this.chatRecordWorker.close(),this.chatRecordWorker.updateList()},this.input_update_input_text_sstyle_show_update(),this.loadImg=document.getElementById("load"),this.loadImg.style.opacity=0,this.reSetStartChatMessage();let e=new URL(window.location.href),t=e.searchParams.get("sendMessage");t&&(this.send(t).then(),e.searchParams.delete("sendMessage"),window.history.pushState("","",e.toString())),this.bingChatStart()},onPrediv(e){this.predivMessageID=this.parserReturnMessage.setMyChat(this.getSendMessage(),this.predivMessageID,!0),this.input_update_input_text_sstyle_show_update(),this.countFontNum()},countFontNum(){this.fontNum=this.inputTextValue?this.inputTextValue.length:0},async reSetStartChatMessage(){this.parserReturnMessage.restart(await this.bingChat.chatFirstMessages.nextStartMessage()),this.chatSuggestionsManager.clear()},input_update_input_text_sstyle_show_update(){this.send_button.style.opacity="1"},getSendMessage(){return this.inputTextValue?this.inputTextValue.trim():this.inputTextValue},isEmpty:e=>!e||""==e,onSend(){if(this.isSpeaking)return;let e=this.getSendMessage();this.inputTextValue="",this.countFontNum(),this.input_update_input_text_sstyle_show_update(),this.isEmpty(e)?k({title:"什么都没有输入",duration:2e3}):(this.send(e).then(),this.inputMaxSwitch.open=!1)},async bingChatStart(){if(!this.bingChat.isStart()){console.time("bingChatStart"),this.isAskingToMagic();try{await this.bingChat.start(this.chatModeSwitchingManager.chatType,(e=>{console.warn("bingChatStart"),console.warn(e),this.loadImg.style.opacity=0,this.parserReturnMessage.addError(e.message),this.isSpeakingFinish()}))}finally{this.isSpeaking=!1,console.timeEnd("bingChatStart")}}},async send(e){if(!this.isSpeaking)try{this.isSpeakingStart(),this.chatRecordWorker.isOpen()||this.chatRecordWorker.addRecord(e),this.chatModeSwitchingManager.hide(),this.parserReturnMessage.setMyChat(e,this.predivMessageID,!1),this.predivMessageID=void 0,this.bingChat.isStart()||await this.bingChatStart(),this.returnMessage=await this.bingChat.sendMessage(e,this.parserReturnMessage.getOnMessageFun((e=>{"close"!==e.type&&"close-accident"!==e.type&&"error"!==e.type||(this.isSpeakingFinish(),this.chatRecordWorker.isOpen()&&this.chatRecordWorker.save())})))}catch(t){console.warn(t),this.parserReturnMessage.addError(t.message),this.isSpeakingFinish()}},isSpeakingStart(e){this.isSpeaking=!0,this.sendButtonValue="响应中..",this.chatSuggestionsManager.clear(),this.loadImg.style.opacity=1,this.startSpeakingTime=performance.now()},isAskingToMagic(){this.isSpeaking=!0,this.chatSuggestionsManager.clear()},isSpeakingFinish(){this.sendButtonValue="发送",this.isSpeaking=!1,this.loadImg.style.opacity=0,this.endSpeakingTime=performance.now(),this.costTime=this.endSpeakingTime-this.startSpeakingTime,this.costTime=(this.costTime/1e3).toFixed(2),this.parserReturnMessage.updateCostTime(this.costTime),console.log(`回答耗时:${this.costTime}s `)}}},[["render",function(e,n,h,g,p,u){const m=S,y=d,v=c,f=l,C=x(w("uni-popup-dialog"),I),A=x(w("uni-popup"),_);return t(),s(v,{class:"content"},{default:i((()=>[b("div",{id:"background"}),b("div",{id:"head"},[b("div",{id:"head-img-div"},[b("img",{src:"data:image/png;base64,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",alt:"图标"}),b("div",{id:"head-img-div-h2-img"},[b("h2",null,"haiBing海冰")])]),b("div",{id:"head-li-div"},[b("a",{href:"https://www.dahai123.top/",target:"_blank"},"大海ChatGPT导航"),b("li",{id:"showChatRecords"},"聊天历史")])]),b("div",{id:"tail"},[b("div",{id:"tail-in"},[b("div",{id:"input-div"},[a(m,{id:"input",onFocus:u.riseTextarea,type:"text",modelValue:p.inputTextValue,"onUpdate:modelValue":n[0]||(n[0]=e=>p.inputTextValue=e),wrap:"soft",maxlength:"4000","confirm-type":"send",onInput:u.onPrediv,onBlur:u.downTextarea},null,8,["onFocus","modelValue","onInput","onBlur"]),a(v,{style:{margin:"0 0.5rem"}},{default:i((()=>[a(y,null,{default:i((()=>[o(r(p.fontNum),1)])),_:1}),o("/4000")])),_:1})]),b("div",{id:"button-div-box"},[a(f,{id:"send",class:"ThemeColors",type:"button",onFocus:u.onSend,modelValue:p.sendButtonValue,"onUpdate:modelValue":n[1]||(n[1]=e=>p.sendButtonValue=e)},null,8,["onFocus","modelValue"]),a(f,{id:"restart",type:"button",value:"+新主题"})])]),b("div",{id:"SearchSuggestions"}),b("div",{class:"loading-spinner",id:"load"},[b("div",{class:"bounce1"}),b("div",{class:"bounce2"}),b("div",{class:"bounce3"})])]),b("div",{id:"body",onClick:n[2]||(n[2]=(...e)=>u.clearScreen&&u.clearScreen(...e))},[b("div",{id:"body-top"}),b("div",{id:"chatTypediv",class:"chatTypeDiv",style:{opacity:"1"}},[b("div",{class:"chatTypeChose",id:"chatTypeChoseCreate"},[b("h3",null,"创造力"),b("p",null,"(可胡编)")]),b("div",{class:"chatTypeChose Chose",id:"chatTypeChoseBalance"},[b("h3",null,"平衡"),b("p",null,"(少编点)")]),b("div",{class:"chatTypeChose",id:"chatTypeChoseAccurate"},[b("h3",null,"精确"),b("p",null,"(不要编)")])]),b("div",{id:"chat"},[b("div",{class:"bing"},[b("div",{class:"adaptiveCardsFatherdiv"},[b("div",{class:"textBlock markdown-body"}," 正在加载，请稍等一会！ "),b("div",{class:"throttling"}," 0 / 0 ")])])]),b("div",{id:"body-bottom"}),a(v,null,{default:i((()=>[a(A,{ref:"cleanRecordPop",type:"dialog"},{default:i((()=>[a(C,{type:"warn",mode:"base",title:"是否清空所有聊天记录?",duration:2e3,"before-close":!0,onClose:u.cleanRecordCancel,onConfirm:u.cleanRecordConfirm},null,8,["onClose","onConfirm"])])),_:1},512)])),_:1})]),b("div",{id:"ChatRecordsListdivOut",class:"ChatRecordsListDivOut"},[b("div",{id:"ChatRecordsListIn",class:"ChatRecordsListIn"},[b("div",{id:"ChatRecordsNameli",class:"ChatRecordsNameli"},[b("div",{id:"ChatRecordsServer",class:"ChatRecordsServer"},"新建"),b("div",{id:"cleanRecord",class:"cleanRecord",onClick:n[3]||(n[3]=(...e)=>u.showCleanRecord&&u.showCleanRecord(...e))},"清空")]),b("div",{id:"ChatRecordsListdiv",class:"ChatRecordsListdiv"},[b("div",null,[b("h3",null,"聊天记录h3"),b("p",null,"聊天记录p")])])])])])),_:1})}],["__scopeId","data-v-d8b7c0d1"]]);export{de as default};
